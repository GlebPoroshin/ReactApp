(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2571:function(e,t,a){Promise.resolve().then(a.bind(a,4499))},4499:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),i=a(2265),r=a(2762),l=(0,i.memo)(e=>{let{id:t,title:a,priority:l,participant:n,dateAdded:o,status:d,onEdit:c,index:u,isMobile:m,isTablet:p,isDesktop:h}=e,b=(0,i.useCallback)(e=>{switch(e.toLowerCase()){case"high":return"high";case"medium":return"medium";default:return"low"}},[]),g=(0,i.useCallback)(e=>{switch(e.toLowerCase()){case"high":return"high-border";case"medium":return"medium-border";default:return"low-border"}},[]),k=(0,i.useCallback)(()=>{console.log("TaskCard: Editing task:",t),c({id:t,title:a,priority:l,participant:n,dateAdded:o,status:d})},[t,a,l,n,o,d,c]),v=()=>{let e="task-card ".concat(g(l));return m?e+=" task-card--mobile":p?e+=" task-card--tablet":e+=" task-card--desktop",e},x=e=>{try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}};return(0,i.useEffect)(()=>{window},[]),(0,s.jsx)(r._l,{draggableId:String(t),index:u,children:(e,t)=>(0,s.jsxs)("div",{className:"".concat(v()," ").concat(t.isDragging?"is-dragging":""),ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,role:"button",tabIndex:0,"aria-label":"Task: ".concat(a),style:{...e.draggableProps.style,touchAction:"none",userSelect:"none"},children:[(0,s.jsxs)("div",{className:"task-header",children:[(0,s.jsx)("h3",{className:"task-title",children:a}),(0,s.jsx)("span",{className:"priority-label ".concat(b(l)),children:l})]}),(0,s.jsxs)("div",{className:"task-details",children:[(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{className:"detail-label",children:"Assigned to:"}),(0,s.jsx)("span",{className:"detail-value",children:n||"Unassigned"})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{className:"detail-label",children:"Created:"}),(0,s.jsx)("span",{className:"detail-value",children:x(o)})]})]}),(0,s.jsx)("button",{className:"edit-task-button",onClick:k,"aria-label":"Edit task: ".concat(a),type:"button",children:(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M16.293 2.293L17.707 3.707L9 12.414L7.586 11L16.293 2.293ZM18.707 2.293L20.121 3.707C20.5115 4.09747 20.7312 4.63348 20.7312 5.1935C20.7312 5.75352 20.5115 6.28953 20.121 6.68L11.414 15.387L6.886 16.922L8.421 12.394L17.128 3.687C17.5185 3.29747 18.0545 3.0778 18.6145 3.0778C19.1745 3.0778 19.7105 3.29747 20.101 3.687L18.687 2.273L18.707 2.293ZM4 21H20V23H4V21Z",fill:"currentColor"})})})]})})}),n=(0,i.memo)(e=>{let t,{id:a,title:i,tasks:n,onAddTask:o,onEditTask:d,isMobile:c,isTablet:u,isDesktop:m}=e;return(0,s.jsxs)("div",{className:(t="task-column",c?t+=" task-column--mobile":u?t+=" task-column--tablet":t+=" task-column--desktop",t),children:[(0,s.jsxs)("div",{className:"column-header",children:[(0,s.jsx)("h2",{className:"column-title",children:i}),(0,s.jsxs)("div",{className:"column-meta",children:[(0,s.jsx)("span",{className:"task-count",children:n.length}),(0,s.jsx)("button",{className:"add-task-button",onClick:o,"aria-label":"Add task to ".concat(i),children:"+"})]})]}),(0,s.jsx)(r.bK,{droppableId:a,children:(e,t)=>(0,s.jsxs)("div",{className:"tasks-container ".concat(t.isDraggingOver?"dragging-over":""),ref:e.innerRef,...e.droppableProps,children:[0===n.length?(0,s.jsxs)("div",{className:"empty-column",children:[(0,s.jsx)("p",{children:"No tasks yet"}),(0,s.jsx)("button",{className:"empty-add-button",onClick:o,children:"Add your first task"})]}):n.map((e,t)=>(0,s.jsx)(l,{id:e.id,index:t,title:e.title,priority:e.priority,participant:e.participant,dateAdded:e.dateAdded,status:e.status,onEdit:d,isMobile:c,isTablet:u,isDesktop:m},e.id)),e.placeholder]})})]})}),o=e=>{let{onAddTask:t,currentStatus:a,editingTask:r=null}=e,[l,n]=(0,i.useState)(""),[o,d]=(0,i.useState)("low"),[c,u]=(0,i.useState)(""),[m,p]=(0,i.useState)(!1),[h,b]=(0,i.useState)(null),[g,k]=(0,i.useState)({});(0,i.useEffect)(()=>{console.log("TaskForm: Received editing task:",r),r?(n(r.title||""),d(r.priority||"low"),u(r.participant||""),b(r.id),p(!0),console.log("TaskForm: Set edit mode, task id:",r.id)):(n(""),d("low"),u(""),p(!1),b(null)),k({})},[r]);let v=(0,i.useCallback)(e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),[]),x=(0,i.useCallback)(()=>a?v(a):"",[a,v]),f=(0,i.useCallback)(()=>{let e={};return l.trim()?l.trim().length<3?e.title="Task title must be at least 3 characters":l.trim().length>100&&(e.title="Task title must be less than 100 characters"):e.title="Task title is required",c.trim().length>200&&(e.participants="Participants field must be less than 200 characters"),k(e),0===Object.keys(e).length},[l,c]),j=(0,i.useCallback)(e=>{if(e.preventDefault(),!f())return;let s=new Date().toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),i={id:h||void 0,title:l.trim(),priority:o,participant:c.trim()||"Unassigned",dateAdded:(null==r?void 0:r.dateAdded)||s,status:(null==r?void 0:r.status)||a};console.log("TaskForm: Submitting task data:",i),t(i),n(""),d("low"),u(""),k({})},[f,h,l,o,c,r,a,t]),C=(0,i.useCallback)(e=>{n(e.target.value),g.title&&k(e=>({...e,title:""}))},[g.title]),y=(0,i.useCallback)(e=>{u(e.target.value),g.participants&&k(e=>({...e,participants:""}))},[g.participants]);return(0,s.jsxs)("div",{className:"task-form-container",children:[(0,s.jsx)("h2",{className:"form-title",children:m?"Edit Task":'New Task in "'.concat(x(),'"')}),(0,s.jsxs)("form",{onSubmit:j,className:"task-form",noValidate:!0,children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"title",children:["Task Title ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"title",value:l,onChange:C,placeholder:"Enter task title",required:!0,maxLength:100,className:g.title?"error":"","aria-describedby":g.title?"title-error":void 0}),g.title&&(0,s.jsx)("span",{id:"title-error",className:"error-message",role:"alert",children:g.title})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"participants",children:"Assigned To"}),(0,s.jsx)("input",{type:"text",id:"participants",value:c,onChange:y,placeholder:"Enter participant names (comma separated)",maxLength:200,className:g.participants?"error":"","aria-describedby":g.participants?"participants-error":void 0}),g.participants&&(0,s.jsx)("span",{id:"participants-error",className:"error-message",role:"alert",children:g.participants})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"priority",children:"Priority"}),(0,s.jsxs)("select",{id:"priority",value:o,onChange:e=>d(e.target.value),children:[(0,s.jsx)("option",{value:"low",children:"Low Priority"}),(0,s.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,s.jsx)("option",{value:"high",children:"High Priority"})]})]}),(0,s.jsx)("button",{type:"submit",className:"submit-button",children:m?"Save Changes":"Add Task"})]})]})};function d(e){let[t,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=window.matchMedia(e);a(t.matches);let s=e=>{a(e.matches)};return t.addEventListener?t.addEventListener("change",s):t.addListener(s),()=>{t.removeEventListener?t.removeEventListener("change",s):t.removeListener(s)}},[e]),t}var c=i.memo(e=>{let t,a,{tasks:l,onAddTask:c,isLoading:u=!1}=e,[m,p]=(0,i.useState)(!1),[h,b]=(0,i.useState)(""),[g,k]=(0,i.useState)(null),[v,x]=(0,i.useState)(!1),f=(0,i.useRef)(null),j=d("(max-width: 768px)"),C=d("(min-width: 769px) and (max-width: 1024px)"),y=d("(min-width: 1025px)"),[N,w]=(0,i.useState)([{id:"todo",title:"To Do"},{id:"in-progress",title:"In Progress"},{id:"review",title:"Review"},{id:"closed",title:"Completed"},{id:"frozen",title:"On Hold"}]),[L,E]=(0,i.useState)(!1),[T,S]=(0,i.useState)(""),A=(0,i.useCallback)(e=>l.filter(t=>t.status===e),[l]),P=(0,i.useMemo)(()=>N,[N]);(0,i.useEffect)(()=>{let e,t;let a=f.current;if(!a||j)return;let s=!1,i=i=>{v||i.target!==a||(s=!0,a.classList.add("scrolling"),e=i.pageX-a.offsetLeft,t=a.scrollLeft,a.style.cursor="grabbing")},r=()=>{s=!1,a.classList.remove("scrolling"),a.style.cursor="grab"},l=()=>{s=!1,a.classList.remove("scrolling"),a.style.cursor="grab"},n=i=>{if(!s)return;i.preventDefault();let r=(i.pageX-a.offsetLeft-e)*2;a.scrollLeft=t-r};return a.addEventListener("mousedown",i),a.addEventListener("mouseleave",r),a.addEventListener("mouseup",l),a.addEventListener("mousemove",n),()=>{a.removeEventListener("mousedown",i),a.removeEventListener("mouseleave",r),a.removeEventListener("mouseup",l),a.removeEventListener("mousemove",n)}},[v,j]),(0,i.useEffect)(()=>{let e=e=>{v&&e.preventDefault()},t=e=>{v&&e.preventDefault()};return document.addEventListener("touchstart",e,{passive:!1}),document.addEventListener("touchmove",t,{passive:!1}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchmove",t)}},[v]);let D=(0,i.useCallback)(e=>{console.log("TaskBoard: Processing form data:",e),c(g?{...e,id:g.id,status:g.status}:{...e,status:h}),p(!1),k(null)},[g,h,c]),I=(0,i.useCallback)(e=>{console.log("TaskBoard: Editing task:",e),k(e),p(!0)},[]),M=(0,i.useCallback)(e=>{b(e),k(null),p(!0)},[]),F=(0,i.useCallback)(()=>{p(!1),k(null)},[]),O=(0,i.useCallback)(()=>{E(!0)},[]),R=(0,i.useCallback)(()=>{E(!1),S("")},[]),U=(0,i.useCallback)(()=>{if(""===T.trim())return;let e=T.toLowerCase().replace(/\s+/g,"-");if(N.some(t=>t.id===e)){alert("Column with this name already exists!");return}w(t=>[...t,{id:e,title:T.trim()}]),E(!1),S("")},[T,N]),_=(0,i.useCallback)(()=>{x(!0)},[]),z=(0,i.useCallback)(e=>{x(!1);let{source:t,destination:a,draggableId:s}=e;if(!a||t.droppableId===a.droppableId&&t.index===a.index)return;let i=Number.parseInt(s,10),r=l.find(e=>e.id===i);if(!r){console.error("Task not found:",i);return}if(l.filter(e=>e.status===a.droppableId).some(e=>e.id!==i&&e.title.toLowerCase()===r.title.toLowerCase())){let e=N.find(e=>e.id===a.droppableId);alert('Task "'.concat(r.title,'" already exists in "').concat(null==e?void 0:e.title,'" column'));return}let n={...r,status:a.droppableId};console.log("Moving task:",r.title,"to:",a.droppableId),c(n)},[l,N,c]);return(0,s.jsxs)("div",{className:(t="task-board",j?t+=" task-board--mobile":C?t+=" task-board--tablet":t+=" task-board--desktop",t),children:[m&&(0,s.jsx)("div",{className:"form-overlay",onClick:e=>e.target===e.currentTarget&&F(),children:(0,s.jsxs)("div",{className:"form-container",children:[(0,s.jsx)("button",{className:"close-form-button",onClick:F,"aria-label":"Close form",children:"\xd7"}),(0,s.jsx)(o,{onAddTask:D,currentStatus:h,editingTask:g})]})}),L&&(0,s.jsx)("div",{className:"form-overlay",onClick:e=>e.target===e.currentTarget&&R(),children:(0,s.jsxs)("div",{className:"form-container column-form",children:[(0,s.jsx)("button",{className:"close-form-button",onClick:R,"aria-label":"Close column form",children:"\xd7"}),(0,s.jsxs)("div",{className:"column-form-content",children:[(0,s.jsx)("h2",{className:"form-title",children:"Add New Column"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"columnTitle",children:"Column Name:"}),(0,s.jsx)("input",{type:"text",id:"columnTitle",value:T,onChange:e=>S(e.target.value),placeholder:"Enter column name",onKeyPress:e=>"Enter"===e.key&&U()})]}),(0,s.jsx)("button",{onClick:U,className:"submit-button",disabled:!T.trim(),children:"Create Column"})]})]})}),(0,s.jsx)(r.Z5,{onDragStart:_,onDragEnd:z,children:(0,s.jsx)("div",{ref:f,className:"board-columns-wrapper ".concat(j?"":"scrollable"),children:(0,s.jsxs)("div",{className:(a="board-columns",j?a+=" board-columns--mobile":C?a+=" board-columns--tablet":a+=" board-columns--desktop",a),children:[P.map(e=>(0,s.jsx)(n,{id:e.id,title:e.title,tasks:A(e.id),onAddTask:()=>M(e.id),onEditTask:I,isMobile:j,isTablet:C,isDesktop:y},e.id)),y&&(0,s.jsx)("button",{className:"add-column-button",onClick:O,"aria-label":"Add new column",disabled:u,children:"+"})]})})}),j&&(0,s.jsx)("div",{className:"mobile-add-column",children:(0,s.jsx)("button",{className:"mobile-add-column-button",onClick:O,disabled:u,children:"+ Add Column"})})]})});function u(){let[e,t]=(0,i.useState)([{id:1,title:"CRM system design",participant:"Azhar",dateAdded:"12/04/2021",priority:"medium",status:"todo"},{id:2,title:"Statistics Dashboard",participant:"Artur",dateAdded:"12/04/2021",priority:"low",status:"todo"},{id:3,title:"Priority Management",participant:"Adyl, Artur",dateAdded:"12/04/2021",priority:"high",status:"todo"},{id:4,title:"Push Notifications",participant:"Artur",dateAdded:"12/04/2021",priority:"low",status:"in-progress"},{id:5,title:"Task Categories",participant:"Adyl",dateAdded:"12/04/2021",priority:"low",status:"in-progress"},{id:6,title:"UI/UX Redesign",participant:"Azhar",dateAdded:"12/04/2021",priority:"low",status:"frozen"}]),[a,r]=(0,i.useState)(!1),[l,n]=(0,i.useState)(null),o=(0,i.useCallback)(async(e,t)=>{try{r(!0),n(null);let a=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:e,action:t,timestamp:new Date().toISOString()})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();console.log("Backend response:",s)}catch(e){console.error("Error sending to backend:",e),n("Failed to sync with server. Changes saved locally."),setTimeout(()=>n(null),3e3)}finally{r(!1)}},[]),d=(0,i.useCallback)(async a=>{console.log("Processing task data:",a);try{let s,i;let r=a.id||Date.now(),l=e.findIndex(e=>e.id===r);if(-1!==l){let n=e[l];s={...a,id:r,status:a.status||n.status},i=n.status!==s.status?"move":"update",t(e=>{let t=[...e];return t[l]=s,t})}else s={...a,id:r},i="create",t(e=>[...e,s]);await o(s,i)}catch(e){console.error("Error processing task:",e),n("Failed to process task. Please try again.")}},[e,o]);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l&&(0,s.jsx)("div",{className:"fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",children:l}),a&&(0,s.jsx)("div",{className:"fixed top-4 left-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",children:"Syncing with server..."}),(0,s.jsx)(c,{tasks:e,onAddTask:d,isLoading:a})]})}a(7960)},7960:function(){}},function(e){e.O(0,[587,338,506,971,117,744],function(){return e(e.s=2571)}),_N_E=e.O()}]);